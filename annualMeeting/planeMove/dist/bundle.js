/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return round; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return doByOrder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return frameRenderModelMove; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return setAppearMoveYList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return frameRefreshDistance; });\n/* unused harmony export reset */\nfunction round(v, e) {\n    var t = 1;\n    for (; e > 0; t *= 10, e--);\n    for (; e < 0; t /= 10, e++);\n    return Math.round(v * t) / t;\n}\n\n/**\n * 将action包装为只有在上一次执行完毕后才能执行下一次，\n * @param action 需要执行的方法，最后一个参数必须为执行完毕的回调函数\n */\nfunction doByOrder(action) {\n    if (typeof action !== 'function') {\n        return null;\n    }\n\n    var isRunning = false,\n        unDoActionQueue = [];\n\n    function run() {\n        if (isRunning) {\n            unDoActionQueue.push(arguments);\n            console.info('unDoActionQueue lenght:' + unDoActionQueue.length + ' method:' + action.name);\n        } else {\n            var slice = Array.prototype.slice,\n                argLength = arguments.length,\n                otherArg = slice.call(arguments, 0, argLength - 1),\n                lastCallbackArg = slice.call(arguments, argLength - 1, argLength)[0];\n\n            isRunning = true;\n\n            action(...otherArg, function () {\n                isRunning = false;\n\n                //执行真正的callback\n                lastCallbackArg(...arguments);\n\n                //执行完毕后开始执行queue中下一个任务\n                if (unDoActionQueue.length > 0) {\n                    run(...unDoActionQueue.shift());\n                }\n            });\n        }\n    }\n\n    return run;\n}\n\nvar hasClearRender = true;\n/**\n * 一帧一帧渲染动画\n * @param time 时间/s\n * @param preMoveY 上一次的Y轴/px\n * @param nextMoveY 下一次的Y轴/px\n * @param modelDom 需要移动的飞机dom\n * @param finishCallback 渲染完成后的回调\n */\nfunction frameRenderModelMove(time, preMoveY, nextMoveY, modelDoms, finishCallback) {\n    if (time === 0) {\n        finishCallback && finishCallback(modelDoms, nextMoveY);\n        return;\n    }\n\n    var timeStart = new Date().getTime();\n\n    var renderCount = round(time * 60),\n        //在time时间内渲染的次数\n    oneFrameMoveY = round((nextMoveY - preMoveY) / renderCount * 1000, 0),\n        //接下来每一帧会移动的距离，小数点后三位，并变为整数，因为小数在计算机中计算会有偏差\n    trueNextMoveY = preMoveY * 1000 + renderCount * oneFrameMoveY,\n        //由于每一帧移动的距离是取最后三位算出来的，所以最后一帧的真实距离会有偏差\n    curMoveY = preMoveY * 1000;\n\n    hasClearRender = false;\n\n    function move() {\n        if (hasClearRender) {\n            return;\n        }\n        curMoveY = curMoveY + oneFrameMoveY;\n        $(modelDoms[0]).css('transform', \"translateY(\" + curMoveY / 1000 + \"px)\");\n        if (preMoveY <= 1050) {\n            modelDoms[1].css('transform', \"translateY(\" + curMoveY / 1000 + \"px)\");\n        }\n        if (curMoveY == trueNextMoveY) {\n            console.info('finish container move, preMoveY:' + preMoveY + ' time: ' + (new Date().getTime() - timeStart) + 'passTime: ' + time);\n            finishCallback && finishCallback(modelDoms, round(trueNextMoveY / 1000, 0));\n            return;\n        } else {\n            //未渲染到指定位置则继续在下一帧渲染\n            requestAnimationFrame(move);\n        }\n    }\n\n    requestAnimationFrame(move);\n}\n\nvar appearMoveYList,\n    nextRedPacketY,\n    nextRedPacketIndex = 0;\n\nfunction setAppearMoveYList(list) {\n    appearMoveYList = list;\n    nextRedPacketY = appearMoveYList[nextRedPacketIndex].moveY;\n}\n\nvar lastRender = false; //一个红包的最后一次渲染\nvar numberZeroKeep = false;\nfunction frameRefreshDistance(time, preMoveY, nextMoveY, distanceDom, finishCallback) {\n    if (time === 0) {\n        finishCallback && finishCallback(distanceDom, nextMoveY);\n        return;\n    }\n\n    var timeStart = new Date().getTime();\n\n    var preDistanceToPacket = nextRedPacketY - preMoveY,\n        //本次刷新开始时距离红包的Y轴距离\n    nextDistanceToPacket = nextRedPacketY - nextMoveY; //本次刷新结束时距离红包的Y轴距离\n\n    //马上到达红包的距离：出现红包\n    if (nextMoveY >= nextRedPacketY) {\n        redPacketAppear(nextRedPacketIndex);\n        nextDistanceToPacket = 0;\n        lastRender = true;\n        nextRedPacketIndex++;\n        nextRedPacketY = appearMoveYList[nextRedPacketIndex].moveY;\n    }\n\n    var renderCount = round(time * 60),\n        //在time时间内渲染的次数\n    oneFrameAdd = round((nextDistanceToPacket - preDistanceToPacket) / renderCount * 100, 0),\n        trueNextCount = preDistanceToPacket * 100 + renderCount * oneFrameAdd,\n        curCount = preDistanceToPacket * 100;\n\n    function move() {\n        curCount += oneFrameAdd;\n        distanceDom.text(curCount);\n        if (numberZeroKeep) {\n            distanceDom.text(0);\n        }\n        if (curCount == trueNextCount) {\n            console.info('finish text update, preMoveY:' + preMoveY + ' time: ' + (new Date().getTime() - timeStart) + ' passtime:' + time);\n            if (lastRender) {\n                //最后一次渲染时直接将text置为0\n                distanceDom.text(0);\n                lastRender = false;\n                numberZeroKeep = true;\n                setTimeout(() => {\n                    numberZeroKeep = false;\n                }, 1000); //一秒内保持数字为0\n            }\n            finishCallback && finishCallback(distanceDom, nextRedPacketY - round(trueNextCount / 100, 0));\n        } else {\n            //未渲染到指定位置则继续在下一帧渲染\n            requestAnimationFrame(move);\n        }\n    }\n\n    requestAnimationFrame(move);\n}\n\n//红包出现逻辑\nfunction redPacketAppear(curRedPacketIndex) {\n    var redPacket = $('#redPacket'),\n        packetText = $('.packetText'),\n        curPacketUrl = appearMoveYList[curRedPacketIndex].imgSrc,\n        redPacketNumber = appearMoveYList[curRedPacketIndex].redPacketNumber;\n\n    if (!curPacketUrl) {\n        return;\n    }\n\n    if (redPacketNumber) {\n        packetText.text(redPacketNumber + '元');\n    }\n\n    if (curRedPacketIndex < appearMoveYList.length - 2) {\n        redPacket.addClass('s1');\n        setTimeout(function () {\n            redPacket.removeClass();\n        }, 3000);\n    } else if (curRedPacketIndex == appearMoveYList.length - 2) {\n        //最后一个做特殊的动画处理\n        var redPacket2 = redPacket.clone();\n        var container = $('.container');\n        container.append(redPacket2);\n        redPacket.removeClass();\n        redPacket.addClass('state5');\n        redPacket2.removeClass();\n        redPacket2.addClass('state6');\n        setTimeout(function () {\n            redPacket.removeClass();\n            redPacket.addClass('state4');\n            redPacket2.removeClass();\n            redPacket2.addClass('state4');\n            setTimeout(function () {\n                redPacket2.css('display', 'none');\n                redPacket.removeClass();\n                redPacket.addClass('state7');\n            }, 500);\n        }, 2000);\n\n        var radio = $('#runAudio')[0];\n        //声音渐轻\n        var waitTime = 4000,\n            timeSpace = 100,\n            time = waitTime / timeSpace,\n            volumeParam = round(1 / time, 3);\n        var interval = setInterval(function () {\n            time--;\n            radio.volume = volumeParam * time;\n            if (time == 0) {\n                clearInterval(interval);\n                //更改背景音乐\n                radio.volume = 1;\n                radio.src = 'source/end.mp3';\n                radio.loop = 'loop';\n                radio.load();\n                radio.play();\n            }\n        }, timeSpace);\n    }\n}\n\nfunction reset() {\n    nextRedPacketIndex = 0;\n    lastRender = false;\n    numberZeroKeep = false;\n    hasClearRender = true;\n\n    var redPacket = $('#redPacket');\n    redPacket.removeClass();\n    redPacket.addClass('state0');\n\n    var packetText = $('.packetText');\n    packetText.text('');\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanM/MmZmOCJdLCJuYW1lcyI6WyJyb3VuZCIsInYiLCJlIiwidCIsIk1hdGgiLCJkb0J5T3JkZXIiLCJhY3Rpb24iLCJpc1J1bm5pbmciLCJ1bkRvQWN0aW9uUXVldWUiLCJydW4iLCJwdXNoIiwiYXJndW1lbnRzIiwiY29uc29sZSIsImluZm8iLCJsZW5ndGgiLCJuYW1lIiwic2xpY2UiLCJBcnJheSIsInByb3RvdHlwZSIsImFyZ0xlbmd0aCIsIm90aGVyQXJnIiwiY2FsbCIsImxhc3RDYWxsYmFja0FyZyIsInNoaWZ0IiwiaGFzQ2xlYXJSZW5kZXIiLCJmcmFtZVJlbmRlck1vZGVsTW92ZSIsInRpbWUiLCJwcmVNb3ZlWSIsIm5leHRNb3ZlWSIsIm1vZGVsRG9tcyIsImZpbmlzaENhbGxiYWNrIiwidGltZVN0YXJ0IiwiRGF0ZSIsImdldFRpbWUiLCJyZW5kZXJDb3VudCIsIm9uZUZyYW1lTW92ZVkiLCJ0cnVlTmV4dE1vdmVZIiwiY3VyTW92ZVkiLCJtb3ZlIiwiJCIsImNzcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFwcGVhck1vdmVZTGlzdCIsIm5leHRSZWRQYWNrZXRZIiwibmV4dFJlZFBhY2tldEluZGV4Iiwic2V0QXBwZWFyTW92ZVlMaXN0IiwibGlzdCIsIm1vdmVZIiwibGFzdFJlbmRlciIsIm51bWJlclplcm9LZWVwIiwiZnJhbWVSZWZyZXNoRGlzdGFuY2UiLCJkaXN0YW5jZURvbSIsInByZURpc3RhbmNlVG9QYWNrZXQiLCJuZXh0RGlzdGFuY2VUb1BhY2tldCIsInJlZFBhY2tldEFwcGVhciIsIm9uZUZyYW1lQWRkIiwidHJ1ZU5leHRDb3VudCIsImN1ckNvdW50IiwidGV4dCIsInNldFRpbWVvdXQiLCJjdXJSZWRQYWNrZXRJbmRleCIsInJlZFBhY2tldCIsInBhY2tldFRleHQiLCJjdXJQYWNrZXRVcmwiLCJpbWdTcmMiLCJyZWRQYWNrZXROdW1iZXIiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVkUGFja2V0MiIsImNsb25lIiwiY29udGFpbmVyIiwiYXBwZW5kIiwicmFkaW8iLCJ3YWl0VGltZSIsInRpbWVTcGFjZSIsInZvbHVtZVBhcmFtIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInZvbHVtZSIsImNsZWFySW50ZXJ2YWwiLCJzcmMiLCJsb29wIiwibG9hZCIsInBsYXkiLCJyZXNldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUFBLFNBQVNBLEtBQVQsQ0FBZUMsQ0FBZixFQUFpQkMsQ0FBakIsRUFBbUI7QUFDZixRQUFJQyxJQUFFLENBQU47QUFDQSxXQUFLRCxJQUFFLENBQVAsRUFBU0MsS0FBRyxFQUFILEVBQU1ELEdBQWYsQ0FBbUI7QUFDbkIsV0FBS0EsSUFBRSxDQUFQLEVBQVNDLEtBQUcsRUFBSCxFQUFNRCxHQUFmLENBQW1CO0FBQ25CLFdBQU9FLEtBQUtKLEtBQUwsQ0FBV0MsSUFBRUUsQ0FBYixJQUFnQkEsQ0FBdkI7QUFDSDs7QUFFRDs7OztBQUlBLFNBQVNFLFNBQVQsQ0FBb0JDLE1BQXBCLEVBQTRCO0FBQ3hCLFFBQUcsT0FBT0EsTUFBUCxLQUFrQixVQUFyQixFQUFpQztBQUM3QixlQUFPLElBQVA7QUFDSDs7QUFFRCxRQUFJQyxZQUFZLEtBQWhCO0FBQUEsUUFDSUMsa0JBQWtCLEVBRHRCOztBQUdBLGFBQVNDLEdBQVQsR0FBZ0I7QUFDWixZQUFHRixTQUFILEVBQWM7QUFDVkMsNEJBQWdCRSxJQUFoQixDQUFxQkMsU0FBckI7QUFDQUMsb0JBQVFDLElBQVIsQ0FBYSw0QkFBNEJMLGdCQUFnQk0sTUFBNUMsR0FBcUQsVUFBckQsR0FBa0VSLE9BQU9TLElBQXRGO0FBQ0gsU0FIRCxNQUdPO0FBQ0gsZ0JBQUlDLFFBQVFDLE1BQU1DLFNBQU4sQ0FBZ0JGLEtBQTVCO0FBQUEsZ0JBQ0lHLFlBQVlSLFVBQVVHLE1BRDFCO0FBQUEsZ0JBRUlNLFdBQVVKLE1BQU1LLElBQU4sQ0FBV1YsU0FBWCxFQUFzQixDQUF0QixFQUF5QlEsWUFBVSxDQUFuQyxD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QWhCO0FBQ0FzQixjQUFVTSxXQUFWO0FBQ0FOLGNBQVVLLFFBQVYsQ0FBbUIsUUFBbkI7O0FBRUEsUUFBSUosYUFBYXZCLEVBQUUsYUFBRixDQUFqQjtBQUNBdUIsZUFBV0osSUFBWCxDQUFnQixFQUFoQjtBQUNIIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiByb3VuZCh2LGUpe1xuICAgIHZhciB0PTE7XG4gICAgZm9yKDtlPjA7dCo9MTAsZS0tKTtcbiAgICBmb3IoO2U8MDt0Lz0xMCxlKyspO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHYqdCkvdDtcbn1cblxuLyoqXG4gKiDlsIZhY3Rpb27ljIXoo4XkuLrlj6rmnInlnKjkuIrkuIDmrKHmiafooYzlrozmr5XlkI7miY3og73miafooYzkuIvkuIDmrKHvvIxcbiAqIEBwYXJhbSBhY3Rpb24g6ZyA6KaB5omn6KGM55qE5pa55rOV77yM5pyA5ZCO5LiA5Liq5Y+C5pWw5b+F6aG75Li65omn6KGM5a6M5q+V55qE5Zue6LCD5Ye95pWwXG4gKi9cbmZ1bmN0aW9uIGRvQnlPcmRlciAoYWN0aW9uKSB7XG4gICAgaWYodHlwZW9mIGFjdGlvbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgaXNSdW5uaW5nID0gZmFsc2UsXG4gICAgICAgIHVuRG9BY3Rpb25RdWV1ZSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gcnVuICgpIHtcbiAgICAgICAgaWYoaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICB1bkRvQWN0aW9uUXVldWUucHVzaChhcmd1bWVudHMpO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCd1bkRvQWN0aW9uUXVldWUgbGVuZ2h0OicgKyB1bkRvQWN0aW9uUXVldWUubGVuZ3RoICsgJyBtZXRob2Q6JyArIGFjdGlvbi5uYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZSxcbiAgICAgICAgICAgICAgICBhcmdMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG90aGVyQXJnID1zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgYXJnTGVuZ3RoLTEpLFxuICAgICAgICAgICAgICAgIGxhc3RDYWxsYmFja0FyZyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCBhcmdMZW5ndGgtMSwgYXJnTGVuZ3RoKVswXTtcblxuICAgICAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgYWN0aW9uKC4uLm90aGVyQXJnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaXNSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAvL+aJp+ihjOecn+ato+eahGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgbGFzdENhbGxiYWNrQXJnKC4uLmFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgICAgICAvL+aJp+ihjOWujOavleWQjuW8gOWni+aJp+ihjHF1ZXVl5Lit5LiL5LiA5Liq5Lu75YqhXG4gICAgICAgICAgICAgICAgaWYodW5Eb0FjdGlvblF1ZXVlLmxlbmd0aCA+MCkge1xuICAgICAgICAgICAgICAgICAgICBydW4oLi4udW5Eb0FjdGlvblF1ZXVlLnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcnVuO1xufVxuXG5cbnZhciBoYXNDbGVhclJlbmRlciA9IHRydWU7XG4vKipcbiAqIOS4gOW4p+S4gOW4p+a4suafk+WKqOeUu1xuICogQHBhcmFtIHRpbWUg5pe26Ze0L3NcbiAqIEBwYXJhbSBwcmVNb3ZlWSDkuIrkuIDmrKHnmoRZ6L20L3B4XG4gKiBAcGFyYW0gbmV4dE1vdmVZIOS4i+S4gOasoeeahFnovbQvcHhcbiAqIEBwYXJhbSBtb2RlbERvbSDpnIDopoHnp7vliqjnmoTpo57mnLpkb21cbiAqIEBwYXJhbSBmaW5pc2hDYWxsYmFjayDmuLLmn5PlrozmiJDlkI7nmoTlm57osINcbiAqL1xuZnVuY3Rpb24gZnJhbWVSZW5kZXJNb2RlbE1vdmUodGltZSwgcHJlTW92ZVksIG5leHRNb3ZlWSwgbW9kZWxEb21zLCBmaW5pc2hDYWxsYmFjaykge1xuICAgIGlmKHRpbWUgPT09IDApIHtcbiAgICAgICAgZmluaXNoQ2FsbGJhY2sgJiYgZmluaXNoQ2FsbGJhY2sobW9kZWxEb21zLCBuZXh0TW92ZVkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRpbWVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG5cbiAgICB2YXIgcmVuZGVyQ291bnQgPSByb3VuZCh0aW1lKjYwKSwgLy/lnKh0aW1l5pe26Ze05YaF5riy5p+T55qE5qyh5pWwXG4gICAgICAgIG9uZUZyYW1lTW92ZVkgPSByb3VuZCgobmV4dE1vdmVZIC0gcHJlTW92ZVkpL3JlbmRlckNvdW50KjEwMDAsIDApLCAvL+aOpeS4i+adpeavj+S4gOW4p+S8muenu+WKqOeahOi3neemu++8jOWwj+aVsOeCueWQjuS4ieS9je+8jOW5tuWPmOS4uuaVtOaVsO+8jOWboOS4uuWwj+aVsOWcqOiuoeeul+acuuS4reiuoeeul+S8muacieWBj+W3rlxuICAgICAgICB0cnVlTmV4dE1vdmVZID0gcHJlTW92ZVkqMTAwMCArIHJlbmRlckNvdW50Km9uZUZyYW1lTW92ZVksIC8v55Sx5LqO5q+P5LiA5bin56e75Yqo55qE6Led56a75piv5Y+W5pyA5ZCO5LiJ5L2N566X5Ye65p2l55qE77yM5omA5Lul5pyA5ZCO5LiA5bin55qE55yf5a6e6Led56a75Lya5pyJ5YGP5beuXG4gICAgICAgIGN1ck1vdmVZID0gcHJlTW92ZVkqMTAwMDtcblxuICAgIGhhc0NsZWFyUmVuZGVyID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiBtb3ZlICgpIHtcbiAgICAgICAgaWYoaGFzQ2xlYXJSZW5kZXIpIHtyZXR1cm59XG4gICAgICAgIGN1ck1vdmVZID0gY3VyTW92ZVkgKyBvbmVGcmFtZU1vdmVZO1xuICAgICAgICAkKG1vZGVsRG9tc1swXSkuY3NzKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZVkoXCIrKGN1ck1vdmVZLzEwMDApK1wicHgpXCIpO1xuICAgICAgICBpZihwcmVNb3ZlWSA8PSAxMDUwKSB7XG4gICAgICAgICAgICAobW9kZWxEb21zWzFdKS5jc3MoJ3RyYW5zZm9ybScsIFwidHJhbnNsYXRlWShcIisoY3VyTW92ZVkvMTAwMCkrXCJweClcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYoY3VyTW92ZVkgPT0gdHJ1ZU5leHRNb3ZlWSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdmaW5pc2ggY29udGFpbmVyIG1vdmUsIHByZU1vdmVZOicgKyBwcmVNb3ZlWSArICcgdGltZTogJyArIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRpbWVTdGFydCkgKyAncGFzc1RpbWU6ICcgKyB0aW1lKTtcbiAgICAgICAgICAgIGZpbmlzaENhbGxiYWNrICYmIGZpbmlzaENhbGxiYWNrKG1vZGVsRG9tcywgcm91bmQodHJ1ZU5leHRNb3ZlWS8xMDAwLCAwKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7IC8v5pyq5riy5p+T5Yiw5oyH5a6a5L2N572u5YiZ57un57ut5Zyo5LiL5LiA5bin5riy5p+TXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSk7XG59XG5cbnZhciBhcHBlYXJNb3ZlWUxpc3QsIG5leHRSZWRQYWNrZXRZLCBuZXh0UmVkUGFja2V0SW5kZXggPSAwO1xuXG5mdW5jdGlvbiBzZXRBcHBlYXJNb3ZlWUxpc3QobGlzdCkge1xuICAgIGFwcGVhck1vdmVZTGlzdCA9IGxpc3Q7XG4gICAgbmV4dFJlZFBhY2tldFkgPSBhcHBlYXJNb3ZlWUxpc3RbbmV4dFJlZFBhY2tldEluZGV4XS5tb3ZlWVxufVxuXG52YXIgbGFzdFJlbmRlciA9IGZhbHNlOyAvL+S4gOS4que6ouWMheeahOacgOWQjuS4gOasoea4suafk1xudmFyIG51bWJlclplcm9LZWVwID0gZmFsc2U7XG5mdW5jdGlvbiBmcmFtZVJlZnJlc2hEaXN0YW5jZSh0aW1lLCBwcmVNb3ZlWSwgbmV4dE1vdmVZLCBkaXN0YW5jZURvbSwgZmluaXNoQ2FsbGJhY2spIHtcbiAgICBpZih0aW1lID09PSAwKSB7XG4gICAgICAgIGZpbmlzaENhbGxiYWNrICYmIGZpbmlzaENhbGxiYWNrKGRpc3RhbmNlRG9tLCBuZXh0TW92ZVkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRpbWVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG5cbiAgICB2YXIgcHJlRGlzdGFuY2VUb1BhY2tldCA9IG5leHRSZWRQYWNrZXRZIC0gcHJlTW92ZVksIC8v5pys5qyh5Yi35paw5byA5aeL5pe26Led56a757qi5YyF55qEWei9tOi3neemu1xuICAgICAgICBuZXh0RGlzdGFuY2VUb1BhY2tldCA9IG5leHRSZWRQYWNrZXRZIC0gbmV4dE1vdmVZOy8v5pys5qyh5Yi35paw57uT5p2f5pe26Led56a757qi5YyF55qEWei9tOi3neemu1xuXG4gICAgLy/pqazkuIrliLDovr7nuqLljIXnmoTot53nprvvvJrlh7rnjrDnuqLljIVcbiAgICBpZihuZXh0TW92ZVkgPj0gbmV4dFJlZFBhY2tldFkpIHtcbiAgICAgICAgcmVkUGFja2V0QXBwZWFyKG5leHRSZWRQYWNrZXRJbmRleCk7XG4gICAgICAgIG5leHREaXN0YW5jZVRvUGFja2V0ID0gMDtcbiAgICAgICAgbGFzdFJlbmRlciA9IHRydWU7XG4gICAgICAgIG5leHRSZWRQYWNrZXRJbmRleCArKztcbiAgICAgICAgbmV4dFJlZFBhY2tldFkgPSBhcHBlYXJNb3ZlWUxpc3RbbmV4dFJlZFBhY2tldEluZGV4XS5tb3ZlWTtcbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyQ291bnQgPSByb3VuZCh0aW1lKjYwKSwgLy/lnKh0aW1l5pe26Ze05YaF5riy5p+T55qE5qyh5pWwXG4gICAgICAgIG9uZUZyYW1lQWRkID0gcm91bmQoKG5leHREaXN0YW5jZVRvUGFja2V0IC0gcHJlRGlzdGFuY2VUb1BhY2tldCkvcmVuZGVyQ291bnQqMTAwLCAwKSxcbiAgICAgICAgdHJ1ZU5leHRDb3VudCA9IHByZURpc3RhbmNlVG9QYWNrZXQqMTAwICsgcmVuZGVyQ291bnQqb25lRnJhbWVBZGQsXG4gICAgICAgIGN1ckNvdW50ID0gcHJlRGlzdGFuY2VUb1BhY2tldCoxMDA7XG5cbiAgICBmdW5jdGlvbiBtb3ZlICgpIHtcbiAgICAgICAgY3VyQ291bnQgKz0gb25lRnJhbWVBZGQ7XG4gICAgICAgIGRpc3RhbmNlRG9tLnRleHQoY3VyQ291bnQpO1xuICAgICAgICBpZihudW1iZXJaZXJvS2VlcCkge1xuICAgICAgICAgICAgZGlzdGFuY2VEb20udGV4dCgwKTtcbiAgICAgICAgfVxuICAgICAgICBpZihjdXJDb3VudCA9PSB0cnVlTmV4dENvdW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ2ZpbmlzaCB0ZXh0IHVwZGF0ZSwgcHJlTW92ZVk6JyArIHByZU1vdmVZICsgJyB0aW1lOiAnICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGltZVN0YXJ0KSArICcgcGFzc3RpbWU6JyArIHRpbWUpO1xuICAgICAgICAgICAgaWYobGFzdFJlbmRlcikgey8v5pyA5ZCO5LiA5qyh5riy5p+T5pe255u05o6l5bCGdGV4dOe9ruS4ujBcbiAgICAgICAgICAgICAgICBkaXN0YW5jZURvbS50ZXh0KDApO1xuICAgICAgICAgICAgICAgIGxhc3RSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBudW1iZXJaZXJvS2VlcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e251bWJlclplcm9LZWVwID0gZmFsc2V9LCAxMDAwKSAvL+S4gOenkuWGheS/neaMgeaVsOWtl+S4ujBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmlzaENhbGxiYWNrICYmIGZpbmlzaENhbGxiYWNrKGRpc3RhbmNlRG9tLCBuZXh0UmVkUGFja2V0WSAtIHJvdW5kKHRydWVOZXh0Q291bnQvMTAwLCAwKSk7XG4gICAgICAgIH0gZWxzZSB7IC8v5pyq5riy5p+T5Yiw5oyH5a6a5L2N572u5YiZ57un57ut5Zyo5LiL5LiA5bin5riy5p+TXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSk7XG59XG5cbi8v57qi5YyF5Ye6546w6YC76L6RXG5mdW5jdGlvbiByZWRQYWNrZXRBcHBlYXIoY3VyUmVkUGFja2V0SW5kZXgpIHtcbiAgICB2YXIgcmVkUGFja2V0ID0gJCgnI3JlZFBhY2tldCcpLFxuICAgICAgICBwYWNrZXRUZXh0ID0gJCgnLnBhY2tldFRleHQnKSxcbiAgICAgICAgY3VyUGFja2V0VXJsID0gYXBwZWFyTW92ZVlMaXN0W2N1clJlZFBhY2tldEluZGV4XS5pbWdTcmMsXG4gICAgICAgIHJlZFBhY2tldE51bWJlciA9IGFwcGVhck1vdmVZTGlzdFtjdXJSZWRQYWNrZXRJbmRleF0ucmVkUGFja2V0TnVtYmVyO1xuXG4gICAgaWYoIWN1clBhY2tldFVybCkgeyByZXR1cm47fVxuXG4gICAgaWYocmVkUGFja2V0TnVtYmVyKSB7XG4gICAgICAgIHBhY2tldFRleHQudGV4dChyZWRQYWNrZXROdW1iZXIgKyAn5YWDJyk7XG4gICAgfVxuXG4gICAgaWYoY3VyUmVkUGFja2V0SW5kZXggPCBhcHBlYXJNb3ZlWUxpc3QubGVuZ3RoIC0yKSB7XG4gICAgICAgIHJlZFBhY2tldC5hZGRDbGFzcygnczEnKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlZFBhY2tldC5yZW1vdmVDbGFzcygpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICB9IGVsc2UgaWYoY3VyUmVkUGFja2V0SW5kZXggPT0gYXBwZWFyTW92ZVlMaXN0Lmxlbmd0aCAtMikge1xuICAgICAgICAvL+acgOWQjuS4gOS4quWBmueJueauiueahOWKqOeUu+WkhOeQhlxuICAgICAgICB2YXIgcmVkUGFja2V0MiA9IHJlZFBhY2tldC5jbG9uZSgpO1xuICAgICAgICB2YXIgY29udGFpbmVyPSAkKCcuY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQocmVkUGFja2V0Mik7XG4gICAgICAgIHJlZFBhY2tldC5yZW1vdmVDbGFzcygpO1xuICAgICAgICByZWRQYWNrZXQuYWRkQ2xhc3MoJ3N0YXRlNScpO1xuICAgICAgICByZWRQYWNrZXQyLnJlbW92ZUNsYXNzKCk7XG4gICAgICAgIHJlZFBhY2tldDIuYWRkQ2xhc3MoJ3N0YXRlNicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVkUGFja2V0LnJlbW92ZUNsYXNzKCk7XG4gICAgICAgICAgICByZWRQYWNrZXQuYWRkQ2xhc3MoJ3N0YXRlNCcpO1xuICAgICAgICAgICAgcmVkUGFja2V0Mi5yZW1vdmVDbGFzcygpO1xuICAgICAgICAgICAgcmVkUGFja2V0Mi5hZGRDbGFzcygnc3RhdGU0Jyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmVkUGFja2V0Mi5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIHJlZFBhY2tldC5yZW1vdmVDbGFzcygpO1xuICAgICAgICAgICAgICAgIHJlZFBhY2tldC5hZGRDbGFzcygnc3RhdGU3Jyk7XG4gICAgICAgICAgICB9LCA1MDApXG4gICAgICAgIH0sIDIwMDApO1xuXG4gICAgICAgIHZhciByYWRpbyA9ICQoJyNydW5BdWRpbycpWzBdO1xuICAgICAgICAvL+WjsOmfs+a4kOi9u1xuICAgICAgICB2YXIgd2FpdFRpbWUgPSA0MDAwLFxuICAgICAgICAgICAgdGltZVNwYWNlID0gMTAwLFxuICAgICAgICAgICAgdGltZSA9IHdhaXRUaW1lL3RpbWVTcGFjZSxcbiAgICAgICAgICAgIHZvbHVtZVBhcmFtID0gcm91bmQoMS90aW1lLCAzKTtcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aW1lIC0tO1xuICAgICAgICAgICAgcmFkaW8udm9sdW1lID0gdm9sdW1lUGFyYW0qdGltZTtcbiAgICAgICAgICAgIGlmKHRpbWUgPT0gMCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIC8v5pu05pS56IOM5pmv6Z+z5LmQXG4gICAgICAgICAgICAgICAgcmFkaW8udm9sdW1lID0gMTtcbiAgICAgICAgICAgICAgICByYWRpby5zcmMgPSAnc291cmNlL2VuZC5tcDMnO1xuICAgICAgICAgICAgICAgIHJhZGlvLmxvb3AgPSAnbG9vcCc7XG4gICAgICAgICAgICAgICAgcmFkaW8ubG9hZCgpO1xuICAgICAgICAgICAgICAgIHJhZGlvLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGltZVNwYWNlKTtcblxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVzZXQgKCkge1xuICAgIG5leHRSZWRQYWNrZXRJbmRleCA9IDA7XG4gICAgbGFzdFJlbmRlciA9IGZhbHNlO1xuICAgIG51bWJlclplcm9LZWVwID0gZmFsc2U7XG4gICAgaGFzQ2xlYXJSZW5kZXIgPSB0cnVlO1xuXG4gICAgdmFyIHJlZFBhY2tldCA9ICQoJyNyZWRQYWNrZXQnKTtcbiAgICByZWRQYWNrZXQucmVtb3ZlQ2xhc3MoKTtcbiAgICByZWRQYWNrZXQuYWRkQ2xhc3MoJ3N0YXRlMCcpO1xuXG4gICAgdmFyIHBhY2tldFRleHQgPSAkKCcucGFja2V0VGV4dCcpO1xuICAgIHBhY2tldFRleHQudGV4dCgnJyk7XG59XG5cbmV4cG9ydCB7XG4gICAgcm91bmQsXG4gICAgZG9CeU9yZGVyLFxuICAgIGZyYW1lUmVuZGVyTW9kZWxNb3ZlLFxuICAgIHNldEFwcGVhck1vdmVZTGlzdCxcbiAgICBmcmFtZVJlZnJlc2hEaXN0YW5jZSxcbiAgICByZXNldFxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__refreshData__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(0);\n\n\n\nvar container = $('.container');\nvar bgsContainer = $('.backgrounds-container'),\n    bg0 = $('.background0'),\n    bg1 = $('.background1'),\n    bg2 = $('.background2'),\n    text = $('.text'),\n    distance = $('#distance'),\n    topGameBtn = $('.topGameBtn'),\n    fire = $('.fire');\ninitView();\n\nObject(__WEBPACK_IMPORTED_MODULE_0__refreshData__[\"b\" /* setSpeed */])(1);\n\ntopGameBtn[0].addEventListener('click', function () {\n    topGameBtn.css('animation', 'myRotate .5s linear infinite');\n    setTimeout(() => {\n        topGameBtn.css('opacity', '0');\n        $(fire[0]).css('animation', 'fire .5s linear infinite');\n        $(fire[1]).css('animation', 'fire .5s linear infinite');\n        refreshData();\n        setTimeout(() => {\n            topGameBtn.css('display', 'none');\n        }, 1000);\n    }, 2000);\n    Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"e\" /* setAppearMoveYList */])([{\n        moveY: 2000,\n        imgSrc: 'source/288.png',\n        redPacketNumber: 288\n    }, {\n        moveY: 4000,\n        imgSrc: 'source/888.png',\n        redPacketNumber: 888\n    }, {\n        moveY: 6000,\n        imgSrc: 'source/1188.png',\n        redPacketNumber: 1188\n    }, {\n        moveY: 8000,\n        imgSrc: 'source/1688.png',\n        redPacketNumber: 1688\n    }, {\n        moveY: 10000,\n        imgSrc: 'source/1888.png',\n        redPacketNumber: 1888\n    }, {\n        moveY: 12000,\n        imgSrc: 'source/2018.png',\n        redPacketNumber: 2018\n    }, {\n        moveY: 0\n    }]);\n\n    // setAppearMoveYList(getRandomAppearMoveYList());\n    playRadio();\n});\n\nfunction initView() {\n    $(container).height(window.innerHeight);\n\n    (function () {\n        //设置背景的宽高\n        var bg0Scale = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"d\" /* round */])(2000 / 1543, 2),\n            bg1Scale = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"d\" /* round */])(2000 / 1769, 2),\n            bg2Scale = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"d\" /* round */])(2000 / 829, 2),\n            bg0W,\n            bg0H,\n            bg1W,\n            bg1H,\n            bg2W,\n            bg2H;\n        bg0H = window.innerHeight;\n        bg0W = parseInt(bg0H * bg0Scale);\n        bg1W = bg0W;\n        bg1H = parseInt(bg1W / bg1Scale);\n        bg2W = bg0W;\n        bg2H = parseInt(bg2W / bg2Scale);\n\n        $(bg0).height(bg0H);\n        $(bg0).width(bg0W);\n        $(bg1).height(bg1H);\n        $(bg1).width(bg1W);\n        $(bg2).height(bg2H);\n\n        //设置按钮位置\n        // var btnWidth = $(topGameBtn).width();\n    })();\n\n    //先让background1显示，一帧后再消失，否则当屏幕刚移动到background1时会有一下卡顿\n    bg1.addClass('appear');\n    setTimeout(function () {\n        bg1.removeClass('appear');\n    }, 1000 / 16);\n}\n\nfunction refreshData() {\n\n    var newRenderContainerMove = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* doByOrder */])(renderContainerMove),\n        newRenderDistanceUpdate = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* doByOrder */])(renderDistanceUpdate),\n        //背景移动和数字更新分开单独渲染\n    lastMoveY = 0,\n        //上一次的移动距离\n    lastMoveY2 = 0;\n\n    Object(__WEBPACK_IMPORTED_MODULE_0__refreshData__[\"a\" /* getData */])(function (data, time) {\n        console.info('data: ' + data + ' time: ' + time);\n        appendBackground(data);\n        addDistanceText(data);\n\n        newRenderContainerMove(time, data, function (bgsContainer, trueNextMoveY) {\n            lastMoveY = trueNextMoveY;\n        });\n\n        //红包出现的逻辑内嵌在数字变化流程\n        newRenderDistanceUpdate(time, data, function (distance, trueNextCount) {\n            lastMoveY2 = trueNextCount;\n        });\n    });\n\n    function renderContainerMove(time, data, callback) {\n        Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"c\" /* frameRenderModelMove */])(time, lastMoveY, data, [bgsContainer, bg2], callback);\n    }\n\n    function renderDistanceUpdate(time, data, callback) {\n        Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"b\" /* frameRefreshDistance */])(time, lastMoveY2, data, distance, callback);\n    }\n\n    var bg1Height = $(bg1).height();\n    var needAddY = $(bgsContainer).height(); //临界距离\n    /**\n     * 根据当前Y轴增加背景\n     * @param curMoveY\n     */\n    function appendBackground(curMoveY) {\n        if (needAddY - curMoveY <= 700) {\n\n            bgsContainer.prepend(bg1.clone());\n            needAddY += bg1Height;\n        }\n    }\n\n    var textHasAppear = false;\n    /**\n     * 增加文字\n     * @param curMoveY\n     */\n    function addDistanceText(curMoveY) {\n        if (!textHasAppear && curMoveY >= 732) {\n            text.css('display', 'block');\n            textHasAppear = true;\n        }\n    }\n};\n\nfunction playRadio() {\n    // var startAudio = $('#startAudio');\n    // startAudio[0].play();\n\n    var runAudio = $('#runAudio');\n    var musics = ['run', 'run1', 'run2', 'run3'];\n    var random = parseInt(Math.random() * 4);\n    // runAudio[0].src = 'source/' + musics[random] + '.mp3';\n    runAudio[0].src = 'source/run.mp3';\n    runAudio[0].play();\n}\n\nvar time = 30;\nfunction initTime() {\n    var timeDom = $('.time');\n    var updateTime = setInterval(function () {\n        timeDom.text(time);\n        if (time === 0) {\n            clearInterval(updateTime);\n            return;\n        }\n        time--;\n    }, 1000);\n}\n\nfunction getRandomAppearMoveYList() {\n    var randomFinalRedPacketList = [108, 128, 168, 188, 208, 228, 268, 288];\n\n    var finalRedPacket = randomFinalRedPacketList[parseInt(Math.random() * randomFinalRedPacketList.length)],\n        redPacketCount = 4,\n        moveYList = [],\n        space = finalRedPacket / redPacketCount,\n        randomNumber;\n    for (var i = 0; i < redPacketCount; i++) {\n        if (i < redPacketCount - 1) {\n            randomNumber = parseInt(space * i + Math.random() * space);\n        } else {\n            randomNumber = finalRedPacket;\n        }\n        moveYList.push({\n            moveY: (i + 1) * 2000,\n            imgSrc: 'source/randombg.png',\n            redPacketNumber: randomNumber\n        });\n    }\n    moveYList.push({\n        moveY: 0\n    });\n\n    return moveYList;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz8zNDc5Il0sIm5hbWVzIjpbImNvbnRhaW5lciIsIiQiLCJiZ3NDb250YWluZXIiLCJiZzAiLCJiZzEiLCJiZzIiLCJ0ZXh0IiwiZGlzdGFuY2UiLCJ0b3BHYW1lQnRuIiwiZmlyZSIsImluaXRWaWV3Iiwic2V0U3BlZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiY3NzIiwic2V0VGltZW91dCIsInJlZnJlc2hEYXRhIiwic2V0QXBwZWFyTW92ZVlMaXN0IiwibW92ZVkiLCJpbWdTcmMiLCJyZWRQYWNrZXROdW1iZXIiLCJwbGF5UmFkaW8iLCJoZWlnaHQiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsImJnMFNjYWxlIiwicm91bmQiLCJiZzFTY2FsZSIsImJnMlNjYWxlIiwiYmcwVyIsImJnMEgiLCJiZzFXIiwiYmcxSCIsImJnMlciLCJiZzJIIiwicGFyc2VJbnQiLCJ3aWR0aCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJuZXdSZW5kZXJDb250YWluZXJNb3ZlIiwiZG9CeU9yZGVyIiwicmVuZGVyQ29udGFpbmVyTW92ZSIsIm5ld1JlbmRlckRpc3RhbmNlVXBkYXRlIiwicmVuZGVyRGlzdGFuY2VVcGRhdGUiLCJsYXN0TW92ZVkiLCJsYXN0TW92ZVkyIiwiZ2V0RGF0YSIsImRhdGEiLCJ0aW1lIiwiY29uc29sZSIsImluZm8iLCJhcHBlbmRCYWNrZ3JvdW5kIiwiYWRkRGlzdGFuY2VUZXh0IiwidHJ1ZU5leHRNb3ZlWSIsInRydWVOZXh0Q291bnQiLCJjYWxsYmFjayIsImZyYW1lUmVuZGVyTW9kZWxNb3ZlIiwiZnJhbWVSZWZyZXNoRGlzdGFuY2UiLCJiZzFIZWlnaHQiLCJuZWVkQWRkWSIsImN1ck1vdmVZIiwicHJlcGVuZCIsImNsb25lIiwidGV4dEhhc0FwcGVhciIsInJ1bkF1ZGlvIiwibXVzaWNzIiwicmFuZG9tIiwiTWF0aCIsInNyYyIsInBsYXkiLCJpbml0VGltZSIsInRpbWVEb20iLCJ1cGRhdGVUaW1lIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiZ2V0UmFuZG9tQXBwZWFyTW92ZVlMaXN0IiwicmFuZG9tRmluYWxSZWRQYWNrZXRMaXN0IiwiZmluYWxSZWRQYWNrZXQiLCJsZW5ndGgiLCJyZWRQYWNrZXRDb3VudCIsIm1vdmVZTGlzdCIsInNwYWNlIiwicmFuZG9tTnVtYmVyIiwiaSIsInB1c2giXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7O0FBR0EsSUFBSUEsWUFBWUMsRUFBRSxZQUFGLENBQWhCO0FBQ0EsSUFBSUMsZUFBZUQsRUFBRSx3QkFBRixDQUFuQjtBQUFBLElBQ0lFLE1BQU1GLEVBQUUsY0FBRixDQURWO0FBQUEsSUFFSUcsTUFBTUgsRUFBRSxjQUFGLENBRlY7QUFBQSxJQUdJSSxNQUFNSixFQUFFLGNBQUYsQ0FIVjtBQUFBLElBSUlLLE9BQU9MLEVBQUUsT0FBRixDQUpYO0FBQUEsSUFLSU0sV0FBV04sRUFBRSxXQUFGLENBTGY7QUFBQSxJQU1JTyxhQUFhUCxFQUFFLGFBQUYsQ0FOakI7QUFBQSxJQU9JUSxPQUFPUixFQUFFLE9BQUYsQ0FQWDtBQVFBUzs7QUFFQSxzRUFBQUMsQ0FBUyxDQUFUOztBQUVBSCxXQUFXLENBQVgsRUFBY0ksZ0JBQWQsQ0FBK0IsT0FBL0IsRUFBd0MsWUFBVztBQUMvQ0osZUFBV0ssR0FBWCxDQUFlLFdBQWYsRUFBNEIsOEJBQTVCO0FBQ0FDLGVBQVcsTUFBTTtBQUNiTixtQkFBV0ssR0FBWCxDQUFlLFNBQWYsRUFBMEIsR0FBMUI7QUFDQVosVUFBRVEsS0FBSyxDQUFMLENBQUYsRUFBV0ksR0FBWCxDQUFlLFdBQWYsRUFBNEIsMEJBQTVCO0FBQ0FaLFVBQUVRLEtBQUssQ0FBTCxDQUFGLEVBQVdJLEdBQVgsQ0FBZSxXQUFmLEVBQTRCLDBCQUE1QjtBQUNBRTtBQUNBRCxtQkFBVyxNQUFJO0FBQ1hOLHVCQUFXSyxHQUFYLENBQWUsU0FBZixFQUEwQixNQUExQjtBQUNILFNBRkQsRUFFRyxJQUZIO0FBR0gsS0FSRCxFQVFHLElBUkg7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TUUsQ0FBTixHQUFVaEIsS0FBS0QsTUFBTCxLQUFnQmUsS0FBbkMsQ0FBZjtBQUNILFNBRkQsTUFFTztBQUNIQywyQkFBZUwsY0FBZjtBQUNIO0FBQ0RHLGtCQUFVSSxJQUFWLENBQWU7QUFDWGxFLG1CQUFPLENBQUNpRSxJQUFFLENBQUgsSUFBTSxJQURGO0FBRVhoRSxvQkFBUSxxQkFGRztBQUdYQyw2QkFBaUI4RDtBQUhOLFNBQWY7QUFLSDtBQUNERixjQUFVSSxJQUFWLENBQWU7QUFDWGxFLGVBQU87QUFESSxLQUFmOztBQUlBLFdBQU84RCxTQUFQO0FBQ0giLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0RGF0YSwgY2xlYXJHZXREYXRhLCBzZXRTcGVlZH0gZnJvbSAnLi9yZWZyZXNoRGF0YSc7XG5pbXBvcnQge2RvQnlPcmRlciwgZnJhbWVSZW5kZXJNb2RlbE1vdmUsIHNldEFwcGVhck1vdmVZTGlzdCwgZnJhbWVSZWZyZXNoRGlzdGFuY2UsIHJlc2V0LCByb3VuZH0gZnJvbSAnLi91dGlscyc7XG5cblxudmFyIGNvbnRhaW5lciA9ICQoJy5jb250YWluZXInKTtcbnZhciBiZ3NDb250YWluZXIgPSAkKCcuYmFja2dyb3VuZHMtY29udGFpbmVyJyksXG4gICAgYmcwID0gJCgnLmJhY2tncm91bmQwJyksXG4gICAgYmcxID0gJCgnLmJhY2tncm91bmQxJyksXG4gICAgYmcyID0gJCgnLmJhY2tncm91bmQyJyksXG4gICAgdGV4dCA9ICQoJy50ZXh0JyksXG4gICAgZGlzdGFuY2UgPSAkKCcjZGlzdGFuY2UnKSxcbiAgICB0b3BHYW1lQnRuID0gJCgnLnRvcEdhbWVCdG4nKSxcbiAgICBmaXJlID0gJCgnLmZpcmUnKTtcbmluaXRWaWV3KCk7XG5cbnNldFNwZWVkKDEpO1xuXG50b3BHYW1lQnRuWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgdG9wR2FtZUJ0bi5jc3MoJ2FuaW1hdGlvbicsICdteVJvdGF0ZSAuNXMgbGluZWFyIGluZmluaXRlJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRvcEdhbWVCdG4uY3NzKCdvcGFjaXR5JywgJzAnKTtcbiAgICAgICAgJChmaXJlWzBdKS5jc3MoJ2FuaW1hdGlvbicsICdmaXJlIC41cyBsaW5lYXIgaW5maW5pdGUnKTtcbiAgICAgICAgJChmaXJlWzFdKS5jc3MoJ2FuaW1hdGlvbicsICdmaXJlIC41cyBsaW5lYXIgaW5maW5pdGUnKTtcbiAgICAgICAgcmVmcmVzaERhdGEoKTtcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgdG9wR2FtZUJ0bi5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXG4gICAgICAgIH0sIDEwMDApXG4gICAgfSwgMjAwMCk7XG4gICAgc2V0QXBwZWFyTW92ZVlMaXN0KFtcbiAgICAgICAge1xuICAgICAgICAgICAgbW92ZVk6IDIwMDAsXG4gICAgICAgICAgICBpbWdTcmM6ICdzb3VyY2UvMjg4LnBuZycsXG4gICAgICAgICAgICByZWRQYWNrZXROdW1iZXI6IDI4OFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlWTogNDAwMCxcbiAgICAgICAgICAgIGltZ1NyYzogJ3NvdXJjZS84ODgucG5nJyxcbiAgICAgICAgICAgIHJlZFBhY2tldE51bWJlcjogODg4XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1vdmVZOiA2MDAwLFxuICAgICAgICAgICAgaW1nU3JjOiAnc291cmNlLzExODgucG5nJyxcbiAgICAgICAgICAgIHJlZFBhY2tldE51bWJlcjogMTE4OFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlWTogODAwMCxcbiAgICAgICAgICAgIGltZ1NyYzogJ3NvdXJjZS8xNjg4LnBuZycsXG4gICAgICAgICAgICByZWRQYWNrZXROdW1iZXI6IDE2ODhcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbW92ZVk6IDEwMDAwLFxuICAgICAgICAgICAgaW1nU3JjOiAnc291cmNlLzE4ODgucG5nJyxcbiAgICAgICAgICAgIHJlZFBhY2tldE51bWJlcjogMTg4OFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBtb3ZlWTogMTIwMDAsXG4gICAgICAgICAgICBpbWdTcmM6ICdzb3VyY2UvMjAxOC5wbmcnLFxuICAgICAgICAgICAgcmVkUGFja2V0TnVtYmVyOiAyMDE4XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1vdmVZOiAwXG4gICAgICAgIH1cbiAgICBdKTtcblxuICAgIC8vIHNldEFwcGVhck1vdmVZTGlzdChnZXRSYW5kb21BcHBlYXJNb3ZlWUxpc3QoKSk7XG4gICAgcGxheVJhZGlvKCk7XG59KTtcblxuZnVuY3Rpb24gaW5pdFZpZXcoKSB7XG4gICAgJChjb250YWluZXIpLmhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpO1xuXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL+iuvue9ruiDjOaZr+eahOWuvemrmFxuICAgICAgICB2YXIgYmcwU2NhbGUgPSByb3VuZCgyMDAwLzE1NDMsIDIpLFxuICAgICAgICAgICAgYmcxU2NhbGUgPSByb3VuZCgyMDAwLzE3NjksIDIpLFxuICAgICAgICAgICAgYmcyU2NhbGUgPSByb3VuZCgyMDAwLzgyOSwgMiksXG4gICAgICAgICAgICBiZzBXLCBiZzBILCBiZzFXLCBiZzFILCBiZzJXLCBiZzJIO1xuICAgICAgICBiZzBIID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBiZzBXID0gcGFyc2VJbnQoYmcwSCpiZzBTY2FsZSk7XG4gICAgICAgIGJnMVcgPSBiZzBXO1xuICAgICAgICBiZzFIID0gcGFyc2VJbnQoYmcxVy9iZzFTY2FsZSk7XG4gICAgICAgIGJnMlcgPSBiZzBXO1xuICAgICAgICBiZzJIID0gcGFyc2VJbnQoYmcyVy9iZzJTY2FsZSk7XG5cbiAgICAgICAgJChiZzApLmhlaWdodChiZzBIKTtcbiAgICAgICAgJChiZzApLndpZHRoKGJnMFcpO1xuICAgICAgICAkKGJnMSkuaGVpZ2h0KGJnMUgpO1xuICAgICAgICAkKGJnMSkud2lkdGgoYmcxVyk7XG4gICAgICAgICQoYmcyKS5oZWlnaHQoYmcySCk7XG5cbiAgICAgICAgLy/orr7nva7mjInpkq7kvY3nva5cbiAgICAgICAgLy8gdmFyIGJ0bldpZHRoID0gJCh0b3BHYW1lQnRuKS53aWR0aCgpO1xuICAgIH0pKCk7XG5cbiAgICAvL+WFiOiuqWJhY2tncm91bmQx5pi+56S677yM5LiA5bin5ZCO5YaN5raI5aSx77yM5ZCm5YiZ5b2T5bGP5bmV5Yia56e75Yqo5YiwYmFja2dyb3VuZDHml7bkvJrmnInkuIDkuIvljaHpob9cbiAgICBiZzEuYWRkQ2xhc3MoJ2FwcGVhcicpXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgYmcxLnJlbW92ZUNsYXNzKCdhcHBlYXInKTtcbiAgICB9LCAxMDAwLzE2KTtcbn1cblxuZnVuY3Rpb24gcmVmcmVzaERhdGEoKSB7XG5cbiAgICB2YXIgbmV3UmVuZGVyQ29udGFpbmVyTW92ZSA9IGRvQnlPcmRlcihyZW5kZXJDb250YWluZXJNb3ZlKSxcbiAgICAgICAgbmV3UmVuZGVyRGlzdGFuY2VVcGRhdGUgPSBkb0J5T3JkZXIocmVuZGVyRGlzdGFuY2VVcGRhdGUpLCAvL+iDjOaZr+enu+WKqOWSjOaVsOWtl+abtOaWsOWIhuW8gOWNleeLrOa4suafk1xuICAgICAgICBsYXN0TW92ZVkgPSAwLCAvL+S4iuS4gOasoeeahOenu+WKqOi3neemu1xuICAgICAgICBsYXN0TW92ZVkyID0gMDtcblxuICAgIGdldERhdGEoZnVuY3Rpb24oZGF0YSwgdGltZSkge1xuICAgICAgICBjb25zb2xlLmluZm8oJ2RhdGE6ICcgKyBkYXRhICsgJyB0aW1lOiAnICsgdGltZSk7XG4gICAgICAgIGFwcGVuZEJhY2tncm91bmQoZGF0YSk7XG4gICAgICAgIGFkZERpc3RhbmNlVGV4dChkYXRhKTtcblxuICAgICAgICBuZXdSZW5kZXJDb250YWluZXJNb3ZlKHRpbWUsIGRhdGEsIGZ1bmN0aW9uKGJnc0NvbnRhaW5lciwgdHJ1ZU5leHRNb3ZlWSkge1xuICAgICAgICAgICAgbGFzdE1vdmVZID0gdHJ1ZU5leHRNb3ZlWTtcbiAgICAgICAgfSlcblxuICAgICAgICAvL+e6ouWMheWHuueOsOeahOmAu+i+keWGheW1jOWcqOaVsOWtl+WPmOWMlua1geeoi1xuICAgICAgICBuZXdSZW5kZXJEaXN0YW5jZVVwZGF0ZSh0aW1lLCBkYXRhLCBmdW5jdGlvbihkaXN0YW5jZSwgdHJ1ZU5leHRDb3VudCkge1xuICAgICAgICAgICAgbGFzdE1vdmVZMiA9IHRydWVOZXh0Q291bnQ7XG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiByZW5kZXJDb250YWluZXJNb3ZlKHRpbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgIGZyYW1lUmVuZGVyTW9kZWxNb3ZlKHRpbWUsbGFzdE1vdmVZLCBkYXRhLCBbYmdzQ29udGFpbmVyLCBiZzJdLCBjYWxsYmFjayk7XG5cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckRpc3RhbmNlVXBkYXRlKHRpbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgIGZyYW1lUmVmcmVzaERpc3RhbmNlKHRpbWUsIGxhc3RNb3ZlWTIsIGRhdGEsIGRpc3RhbmNlLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgdmFyIGJnMUhlaWdodCA9ICQoYmcxKS5oZWlnaHQoKTtcbiAgICB2YXIgbmVlZEFkZFkgPSAkKGJnc0NvbnRhaW5lcikuaGVpZ2h0KCk7IC8v5Li055WM6Led56a7XG4gICAgLyoqXG4gICAgICog5qC55o2u5b2T5YmNWei9tOWinuWKoOiDjOaZr1xuICAgICAqIEBwYXJhbSBjdXJNb3ZlWVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFwcGVuZEJhY2tncm91bmQoY3VyTW92ZVkpIHtcbiAgICAgICAgaWYobmVlZEFkZFkgLSBjdXJNb3ZlWSA8PSA3MDApIHtcblxuICAgICAgICAgICAgYmdzQ29udGFpbmVyLnByZXBlbmQoYmcxLmNsb25lKCkpO1xuICAgICAgICAgICAgbmVlZEFkZFkgKz0gYmcxSGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRleHRIYXNBcHBlYXIgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiDlop7liqDmloflrZdcbiAgICAgKiBAcGFyYW0gY3VyTW92ZVlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGREaXN0YW5jZVRleHQoY3VyTW92ZVkpIHtcbiAgICAgICAgaWYoIXRleHRIYXNBcHBlYXIgJiYgY3VyTW92ZVkgPj0gNzMyKSB7XG4gICAgICAgICAgICB0ZXh0LmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgdGV4dEhhc0FwcGVhciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHBsYXlSYWRpbygpIHtcbiAgICAvLyB2YXIgc3RhcnRBdWRpbyA9ICQoJyNzdGFydEF1ZGlvJyk7XG4gICAgLy8gc3RhcnRBdWRpb1swXS5wbGF5KCk7XG5cbiAgICB2YXIgcnVuQXVkaW8gPSAkKCcjcnVuQXVkaW8nKTtcbiAgICB2YXIgbXVzaWNzID0gWydydW4nLCAncnVuMScsICdydW4yJywgJ3J1bjMnXTtcbiAgICB2YXIgcmFuZG9tID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSo0KTtcbiAgICAvLyBydW5BdWRpb1swXS5zcmMgPSAnc291cmNlLycgKyBtdXNpY3NbcmFuZG9tXSArICcubXAzJztcbiAgICBydW5BdWRpb1swXS5zcmMgPSAnc291cmNlL3J1bi5tcDMnO1xuICAgIHJ1bkF1ZGlvWzBdLnBsYXkoKTtcbn1cblxudmFyIHRpbWUgPSAzMDtcbmZ1bmN0aW9uIGluaXRUaW1lKCkge1xuICAgIHZhciB0aW1lRG9tID0gJCgnLnRpbWUnKTtcbiAgICB2YXIgdXBkYXRlVGltZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lRG9tLnRleHQodGltZSk7XG4gICAgICAgIGlmKHRpbWUgPT09IDAgKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHVwZGF0ZVRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRpbWUgLS07XG4gICAgfSwgMTAwMCk7XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbUFwcGVhck1vdmVZTGlzdCgpIHtcbiAgICB2YXIgcmFuZG9tRmluYWxSZWRQYWNrZXRMaXN0ID0gWzEwOCwgMTI4LCAxNjgsIDE4OCwgMjA4LCAyMjgsIDI2OCwgMjg4XTtcblxuICAgIHZhciBmaW5hbFJlZFBhY2tldCA9IHJhbmRvbUZpbmFsUmVkUGFja2V0TGlzdFtwYXJzZUludChNYXRoLnJhbmRvbSgpKnJhbmRvbUZpbmFsUmVkUGFja2V0TGlzdC5sZW5ndGgpXSxcbiAgICAgICAgcmVkUGFja2V0Q291bnQgPSA0LFxuICAgICAgICBtb3ZlWUxpc3QgPSBbXSxcbiAgICAgICAgc3BhY2UgPSBmaW5hbFJlZFBhY2tldC9yZWRQYWNrZXRDb3VudCxcbiAgICAgICAgcmFuZG9tTnVtYmVyO1xuICAgIGZvcih2YXIgaT0wOyBpPHJlZFBhY2tldENvdW50OyBpKyspIHtcbiAgICAgICAgaWYoaSA8IHJlZFBhY2tldENvdW50IC0xKSB7XG4gICAgICAgICAgICByYW5kb21OdW1iZXIgPSBwYXJzZUludChzcGFjZSppICsgTWF0aC5yYW5kb20oKSAqIHNwYWNlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmFuZG9tTnVtYmVyID0gZmluYWxSZWRQYWNrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgbW92ZVlMaXN0LnB1c2goe1xuICAgICAgICAgICAgbW92ZVk6IChpKzEpKjIwMDAsXG4gICAgICAgICAgICBpbWdTcmM6ICdzb3VyY2UvcmFuZG9tYmcucG5nJyxcbiAgICAgICAgICAgIHJlZFBhY2tldE51bWJlcjogcmFuZG9tTnVtYmVyXG4gICAgICAgIH0pXG4gICAgfVxuICAgIG1vdmVZTGlzdC5wdXNoKHtcbiAgICAgICAgbW92ZVk6IDBcbiAgICB9KVxuXG4gICAgcmV0dXJuIG1vdmVZTGlzdDtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvbWFpbi5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getData; });\n/* unused harmony export clearGetData */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return setSpeed; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\n\n\nvar inerval;\n\nvar getData = callback => {\n\n    requestData();\n\n    function requestData() {\n\n        var sTime = new Date().getTime();\n        //每秒尝试获取一次数据\n        inerval = setInterval(() => {\n            getSpeed(function (speed) {\n                var eTime = new Date().getTime(),\n                    useTime = Object(__WEBPACK_IMPORTED_MODULE_0__utils__[\"d\" /* round */])((eTime - sTime) / 1000, 2),\n                    distance = Object(__WEBPACK_IMPORTED_MODULE_0__utils__[\"d\" /* round */])(useTime * speed, 0),\n                    sumDistance = getSumDistance(distance);\n                sTime = eTime;\n\n                callback && callback(sumDistance, useTime);\n            });\n        }, 1000);\n    }\n\n    var sumDistance = 0;\n    function getSumDistance(curDistance) {\n\n        // var curDistance = curDistance + Math.round(Math.random()*curDistance/10);\n        sumDistance += curDistance;\n        return sumDistance;\n    }\n\n    function getSpeed(callback) {\n        $.get({\n            url: 'http://www.netcall.cc:3001/getSpeed',\n            cache: false,\n            success: function (res) {\n                callback && callback(res);\n            }\n        });\n    }\n};\n\nfunction clearGetData() {\n    if (inerval) {\n        clearInterval(inerval);\n    }\n}\n\nfunction setSpeed(speed, callback) {\n    $.get({\n        url: 'http://www.netcall.cc:3001/setSpeed?speed=' + speed,\n        cache: false,\n        success: function (res) {\n            callback && callback(res);\n        }\n    });\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVmcmVzaERhdGEuanM/Y2I0YiJdLCJuYW1lcyI6WyJpbmVydmFsIiwiZ2V0RGF0YSIsImNhbGxiYWNrIiwicmVxdWVzdERhdGEiLCJzVGltZSIsIkRhdGUiLCJnZXRUaW1lIiwic2V0SW50ZXJ2YWwiLCJnZXRTcGVlZCIsInNwZWVkIiwiZVRpbWUiLCJ1c2VUaW1lIiwicm91bmQiLCJkaXN0YW5jZSIsInN1bURpc3RhbmNlIiwiZ2V0U3VtRGlzdGFuY2UiLCJjdXJEaXN0YW5jZSIsIiQiLCJnZXQiLCJ1cmwiLCJjYWNoZSIsInN1Y2Nlc3MiLCJyZXMiLCJjbGVhckdldERhdGEiLCJjbGVhckludGVydmFsIiwic2V0U3BlZWQiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFFQSxJQUFJQSxPQUFKOztBQUVBLElBQUlDLFVBQVdDLFFBQUQsSUFBYzs7QUFFeEJDOztBQUVBLGFBQVNBLFdBQVQsR0FBd0I7O0FBRXBCLFlBQUlDLFFBQVEsSUFBSUMsSUFBSixHQUFXQyxPQUFYLEVBQVo7QUFDQTtBQUNBTixrQkFBVU8sWUFBWSxNQUFNO0FBQ3hCQyxxQkFBUyxVQUFTQyxLQUFULEVBQWdCO0FBQ3JCLG9CQUFJQyxRQUFRLElBQUlMLElBQUosR0FBV0MsT0FBWCxFQUFaO0FBQUEsb0JBQ0lLLFVBQVUsNkRBQUFDLENBQU0sQ0FBQ0YsUUFBUU4sS0FBVCxJQUFnQixJQUF0QixFQUE0QixDQUE1QixDQURkO0FBQUEsb0JBRUlTLFdBQVcsNkRBQUFELENBQU1ELFVBQVVGLEtBQWhCLEVBQXVCLENBQXZCLENBRmY7QUFBQSxvQkFHSUssY0FBY0MsZUFBZUYsUUFBZixDQUhsQjtBQUlBVCx3QkFBUU0sS0FBUjs7QUFFQVIsNEJBQVlBLFNBQVNZLFdBQVQsRUFBc0JILE9BQXRCLENBQVo7QUFDSCxhQVJEO0FBVUgsU0FYUyxFQVdQLElBWE8sQ0FBVjtBQVlIOztBQUVELFFBQUlHLGNBQWMsQ0FBbEI7QUFDQSxhQUFTQyxjQUFULENBQXlCQyxXQUF6QixFQUFzQzs7QUFFbEM7QUFDQUYsdUJBQWVFLFdBQWY7QUFDQSxlQUFPRixXQUFQO0FBQ0g7O0FBRUQsYUFBU04sUUFBVCxDQUFrQk4sUUFBbEIsRUFBNEI7QUFDeEJlLFVBQUVDLEdBQUYsQ0FBTTtBQUNGQyxpQkFBSyxxQ0FESDtBQUVGQyxtQkFBTSxLQUZKO0FBR0ZDLHFCQUFTLFVBQVNDLEdBQVQsRUFBYztBQUNuQnBCLDRCQUFZQSxTQUFTb0IsR0FBVCxDQUFaO0FBQ0g7QUFMQyxTQUFOO0FBT0g7QUFDSixDQXZDRDs7QUF5Q0EsU0FBU0MsWUFBVCxHQUF5QjtBQUNyQixRQUFHdkIsT0FBSCxFQUFZO0FBQ1J3QixzQkFBY3hCLE9BQWQ7QUFDSDtBQUNKOztBQUVELFNBQVN5QixRQUFULENBQWtCaEIsS0FBbEIsRUFBeUJQLFFBQXpCLEVBQW1DO0FBQy9CZSxNQUFFQyxHQUFGLENBQU07QUFDRkMsYUFBSywrQ0FBK0NWLEtBRGxEO0FBRUZXLGVBQU0sS0FGSjtBQUdGQyxpQkFBUyxVQUFTQyxHQUFULEVBQWM7QUFDbkJwQix3QkFBWUEsU0FBU29CLEdBQVQsQ0FBWjtBQUNIO0FBTEMsS0FBTjtBQU9IIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JvdW5kfSBmcm9tIFwiLi91dGlsc1wiO1xuXG52YXIgaW5lcnZhbDtcblxudmFyIGdldERhdGEgPSAoY2FsbGJhY2spID0+IHtcblxuICAgIHJlcXVlc3REYXRhKCk7XG5cbiAgICBmdW5jdGlvbiByZXF1ZXN0RGF0YSAoKSB7XG5cbiAgICAgICAgdmFyIHNUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIC8v5q+P56eS5bCd6K+V6I635Y+W5LiA5qyh5pWw5o2uXG4gICAgICAgIGluZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBnZXRTcGVlZChmdW5jdGlvbihzcGVlZCkge1xuICAgICAgICAgICAgICAgIHZhciBlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICB1c2VUaW1lID0gcm91bmQoKGVUaW1lIC0gc1RpbWUpLzEwMDAsIDIpLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHJvdW5kKHVzZVRpbWUgKiBzcGVlZCwgMCksXG4gICAgICAgICAgICAgICAgICAgIHN1bURpc3RhbmNlID0gZ2V0U3VtRGlzdGFuY2UoZGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgIHNUaW1lID0gZVRpbWU7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhzdW1EaXN0YW5jZSwgdXNlVGltZSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cblxuICAgIHZhciBzdW1EaXN0YW5jZSA9IDA7XG4gICAgZnVuY3Rpb24gZ2V0U3VtRGlzdGFuY2UgKGN1ckRpc3RhbmNlKSB7XG5cbiAgICAgICAgLy8gdmFyIGN1ckRpc3RhbmNlID0gY3VyRGlzdGFuY2UgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqY3VyRGlzdGFuY2UvMTApO1xuICAgICAgICBzdW1EaXN0YW5jZSArPSBjdXJEaXN0YW5jZTtcbiAgICAgICAgcmV0dXJuIHN1bURpc3RhbmNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNwZWVkKGNhbGxiYWNrKSB7XG4gICAgICAgICQuZ2V0KHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly93d3cubmV0Y2FsbC5jYzozMDAxL2dldFNwZWVkJyxcbiAgICAgICAgICAgIGNhY2hlOmZhbHNlLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFyR2V0RGF0YSAoKSB7XG4gICAgaWYoaW5lcnZhbCkge1xuICAgICAgICBjbGVhckludGVydmFsKGluZXJ2YWwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0U3BlZWQoc3BlZWQsIGNhbGxiYWNrKSB7XG4gICAgJC5nZXQoe1xuICAgICAgICB1cmw6ICdodHRwOi8vd3d3Lm5ldGNhbGwuY2M6MzAwMS9zZXRTcGVlZD9zcGVlZD0nICsgc3BlZWQsXG4gICAgICAgIGNhY2hlOmZhbHNlLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQge1xuICAgIGdldERhdGEsXG4gICAgY2xlYXJHZXREYXRhLFxuICAgIHNldFNwZWVkXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9yZWZyZXNoRGF0YS5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);